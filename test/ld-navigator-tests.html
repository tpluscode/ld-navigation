<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ld-link-tests</title>
    <script src="../bower_components/webcomponentsjs/webcomponents.min.js"></script>
    <script src="../bower_components/web-component-tester/browser.js"></script>
    <link rel="import" href="../ld-navigator.html">
</head>
<body>
    <test-fixture id="EmptyNavigator">
        <template>
            <ld-navigator></ld-navigator>
        </template>
    </test-fixture>

    <script>
        var ldNavigator;

        describe('<ld-navigator>', function(){

            beforeEach(function(){
                LdNavigation.Context.clear();
                ldNavigator = fixture('EmptyNavigator');
            });

            it('has empty base URL', function () {
                assert.equal(ldNavigator.base, '');
            });

            describe('when setting base URL property', function(){

                beforeEach(function() {
                    ldNavigator.base = 'http://example.org/';
                });

                it('doesn\'t set attribute', function(){
                    assert.isNull(ldNavigator.getAttribute('base'));
                });

            });

            describe('when setting base URL attribute', function(){

                beforeEach(function() {
                    ldNavigator.setAttribute('base', 'http://example.org/');
                });

                it('has property set', function(){
                    assert.equal(ldNavigator.base, 'http://example.org/');
                });

            });

            describe('when setting base URL property with URL not ending in slash', function(){

                beforeEach(function() {
                    ldNavigator.base = 'http://example.org';
                });

                it('should append slash to value', function(){
                    assert.equal(ldNavigator.base, 'http://example.org/');
                });

            });

        });

    </script>
</body>
</html>